<!--
  Generated template for the QrPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<!-- <ion-header>

  <ion-navbar>
    <ion-title>QRコード</ion-title>
  </ion-navbar>

</ion-header> -->


<ion-content padding>

<div padding>
  <ion-segment [(ngModel)]="mode">
    <ion-segment-button value="scan">
      スキャン
    </ion-segment-button>
    <ion-segment-button value="invoice">
      請求書作成
    </ion-segment-button>
    <ion-segment-button value="myqr">
      自分のアドレス
    </ion-segment-button>
  </ion-segment>
</div>

<div [ngSwitch]="mode">

  <ion-list *ngSwitchCase="'scan'">

  	<button ion-button full (click)="scan()">QRコードを読み取る</button>

  	<!-- <button ion-button (click)="clear()">Clear</button> -->
  	<div class="scan-result">{{scannedText}}</div>
  	<div>{{format}}</div>

  </ion-list>

  <ion-list *ngSwitchCase="'invoice'">
    <ion-list>
      <ion-item>
      <ion-label stacked>数量</ion-label>
      <ion-input type="number" [(ngModel)]="quantity"></ion-input>
      </ion-item>
      <ion-item>
      <ion-label stacked>メッセージ</ion-label>
      <ion-input type="text" [(ngModel)]="message"></ion-input>
      </ion-item>
    </ion-list>
    <button ion-button full icon-left (click)="createInvoiceCode()">請求書を作成</button>

    <ion-card *ngIf="createdInvoiceCode">
    <ngx-qrcode [qrc-value]="createdInvoiceCode"></ngx-qrcode>
    <ion-card-content>
    <p>請求する数量: {{ createdInvoiceCode }}</p>
    </ion-card-content>
    </ion-card>
  </ion-list>

  <ion-list *ngSwitchCase="'myqr'">
    <ion-card *ngIf="address">
    <ngx-qrcode [qrc-value]="address"></ngx-qrcode>
    <ion-card-content>
    <p>自分のアドレス: {{ address }}</p>
    </ion-card-content>
    </ion-card>


  </ion-list>

</div>

</ion-content>
